<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>pythongamelukasohlemutz</title>
<style>
body,html {margin:0;padding:0;overflow:hidden;background:#111;color:white;font-family:Arial;}
#gameCanvas{display:block;background:#222;}
#overlay{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  background:#333;border:3px solid #ff0;padding:20px;border-radius:15px;
  text-align:center; display:none;width:600px;color:white;font-size:26px;z-index:10;
}
#overlay button{margin:10px;padding:15px 20px;font-size:22px;border:none;border-radius:10px;cursor:pointer;}
#scoreboard{position:absolute;top:10px;left:10px;font-size:26px;}
#menu{position:absolute;top:10px;right:10px;background:#333;padding:15px;border-radius:15px;text-align:center;color:white;font-size:18px;z-index:10;}
#menu button{margin:5px;padding:8px 12px;font-size:16px;cursor:pointer;}
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="overlay"></div>
<div id="menu">
  <button onclick="saveScore()">Score im Ordner speichern</button>
  <button onclick="loadScore()">Score aus dem Ordner von letztem mal hier herrein laden</button>
</div>
<div id="scoreboard"></div>

<script>
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");
let cw,ch;
function resize(){ cw=window.innerWidth; ch=window.innerHeight; canvas.width=cw; canvas.height=ch; }
window.addEventListener("resize",resize); resize();

// --- GAME VARIABLES ---
let player={x:0,y:0,trail:[],size:25,length:5,segments:[]};
let speed=5; // Standardwert
let score=0;
let difficulty="leicht"; // Standardwert
let mapOffset={x:0,y:0};
let keys={};
let overlay=document.getElementById("overlay");
let menu=document.getElementById("menu");
let scoreboard=document.getElementById("scoreboard");

// AI CLUSTERS
const AI_TYPES = [
  // ðŸŸ¢ Leicht (AnfÃ¤nger)
  {name:"LLaMA", color:"lime", strength:1},
  {name:"Gemma", color:"lightgreen", strength:1},
  {name:"Phi", color:"lightblue", strength:1},
  {name:"TinyGPT", color:"#66ffcc", strength:1},

  // ðŸŸ¡ Mittel
  {name:"Perplexity", color:"magenta", strength:2},
  {name:"Bard", color:"orange", strength:2},
  {name:"Mistral", color:"#00b3b3", strength:2},
  {name:"Falcon", color:"#cccc00", strength:2},
  {name:"Cohere", color:"#ff9933", strength:2},
  {name:"Command-R", color:"#9999ff", strength:2},

  // ðŸ”´ Schwer
  {name:"ChatGPT", color:"cyan", strength:3},
  {name:"Claude", color:"pink", strength:3},
  {name:"DeepSeek", color:"red", strength:3},
  {name:"Qwen", color:"#ff6666", strength:3},
  {name:"Grok", color:"#ff00ff", strength:3},

  // ðŸŸ£ Sehr schwer / Boss
  {name:"GPT-4", color:"#00ffff", strength:4},
  {name:"Claude-Opus", color:"#ff66cc", strength:4},
  {name:"DeepMind", color:"#6633ff", strength:4},
  {name:"ASI-Core", color:"#ffffff", strength:5}
];

let aiClusters=[];
let activeCluster=null;

// TASKS
const tasks=[
  {q:"3+2=?",a:["4","5","6"],c:1},
  {q:"print('Hi') ergibt?",a:["Hi","hi","Error"],c:0},
  {q:"len('Python')=?",a:["5","6","7"],c:1},
  {q:"2**3=?",a:["6","8","9"],c:1},
  {q:"'a'+'b'=?",a:["ab","a+b","ba"],c:0},
  {q:"10//3=?",a:["3","3.33","4"],c:0},
  {q:"if True and False:",a:["True","False","Error"],c:1},
  {q:"x=5; x>3?",a:["True","False","Error"],c:0},
  {q:"for i in range(3): print(i)",a:["0 1 2","1 2 3","0 1 2 3"],c:0},
  {q:"type(3.14)?",a:["int","float","str"],c:1},
  {q:"3+2=?",a:["4","5","6"],c:1},
  {q:"10-7=?",a:["2","3","4"],c:1},
  {q:"2*3=?",a:["5","6","7"],c:1},
  {q:"8/2=?",a:["4","5","6"],c:0},
  {q:"5%2=?",a:["2","1","0"],c:1},
  {q:"2**3=?",a:["6","7","8"],c:2},
  {q:"len('Python')=?",a:["5","6","7"],c:1},
  {q:"'a'+'b'=?",a:["ab","ba","a+b"],c:0},
  {q:"'Hi'*3=?",a:["HiHiHi","HiHi","HiHiHiHi"],c:0},
  {q:"bool(0)?",a:["True","False","Error"],c:1},
  {q:"bool(1)?",a:["True","False","Error"],c:0},
  {q:"not True?",a:["False","True","Error"],c:0},
  {q:"not False?",a:["True","False","Error"],c:0},
  {q:"5>3?",a:["True","False","Error"],c:0},
  {q:"2<1?",a:["True","False","Error"],c:1},
  {q:"5>=5?",a:["True","False","Error"],c:0},
  {q:"3<=2?",a:["True","False","Error"],c:1},
  {q:"3==3?",a:["True","False","Error"],c:0},
  {q:"4!=5?",a:["True","False","Error"],c:0},
  {q:"x=5; x+2?",a:["5","7","2"],c:1},
  {q:"x=3; x+=2; x?",a:["3","2","5"],c:2},
  {q:"x=10; x-=4; x?",a:["6","4","10"],c:0},
  {q:"x=2; x*=3; x?",a:["5","6","2"],c:1},
  {q:"x=8; x//=3; x?",a:["2","3","3.0"],c:0},
  {q:"x=5; x%=2; x?",a:["1","2","0"],c:0},
  {q:"for i in range(3): print(i)",a:["0 1 2","1 2 3","0 1 2 3"],c:0},
  {q:"list(range(4))?",a:["[0,1,2,3]","[1,2,3,4]","[0,1,2,3,4]"],c:0},
  {q:"x=[1,2,3]; len(x)?",a:["3","2","1"],c:0},
  {q:"x=[1,2,3]; x[0]?",a:["1","2","3"],c:0},
  {q:"x=[1,2,3]; x[-1]?",a:["1","2","3"],c:2},
  {q:"x=[1,2,3]; x.append(4); x?",a:["[1,2,3,4]","[4,1,2,3]","[1,2,3]"],c:0},
  {q:"x=[1,2,3]; x.pop(); x?",a:["[1,2]","[2,3]","[1,2,3]"],c:0},
  {q:"if True: x=1 else: x=2; x?",a:["1","2","Error"],c:0},
  {q:"if False: x=1 else: x=2; x?",a:["1","2","Error"],c:1},
  {q:"x=5; if x>3: y=10 else: y=20; y?",a:["10","20","5"],c:0},
  {q:"while 0<3: x=2; break; x?",a:["2","3","0"],c:0},
  {q:"s='Hello'; s[1]?",a:["e","H","l"],c:0},
  {q:"s='Hello'; s[-1]?",a:["o","H","l"],c:0},
  {q:"s='Hello'; s[0:2]?",a:["He","el","Ho"],c:0},
  {q:"s='Python'; len(s)?",a:["6","5","7"],c:0},
  {q:"s='Python'; s.upper()?",a:["PYTHON","python","Python"],c:0},
  {q:"s='Python'; s.lower()?",a:["python","PYTHON","Python"],c:0},
  {q:"x=3; y=5; x<y?",a:["True","False","Error"],c:0},
  {q:"x=5; y=3; x>y?",a:["True","False","Error"],c:0},
  {q:"x=True; y=False; x and y?",a:["False","True","Error"],c:0},
  {q:"x=True; y=False; x or y?",a:["True","False","Error"],c:0},
  {q:"x=False; y=False; not x?",a:["True","False","Error"],c:0},
  {q:"def f(x): return x+1; f(3)?",a:["4","3","5"],c:0},
  {q:"def f(x): return x*2; f(4)?",a:["8","6","4"],c:0},
  {q:"x=[1,2,3]; 2 in x?",a:["True","False","Error"],c:0},
  {q:"x=[1,2,3]; 5 in x?",a:["True","False","Error"],c:1},
  {q:"x='abc'; 'a' in x?",a:["True","False","Error"],c:0},
  {q:"x='abc'; 'd' in x?",a:["True","False","Error"],c:1},
  {q:"x=5; x==5?",a:["True","False","Error"],c:0},
  {q:"x=5; x!=5?",a:["True","False","Error"],c:1},
  {q:"x=5; y=5; x==y?",a:["True","False","Error"],c:0},
  {q:"x=5; y=3; x==y?",a:["True","False","Error"],c:1},
  {q:"x=5; y=3; x!=y?",a:["True","False","Error"],c:0},
  {q:"x=5; y=5; x!=y?",a:["True","False","Error"],c:1},
  {q:"[i for i in range(3)]?",a:["[0,1,2]","[1,2,3]","[0,1,2,3]"],c:0},
  {q:"[i*2 for i in range(3)]?",a:["[0,2,4]","[2,4,6]","[0,1,2]"],c:0},
  {q:"x='Python'; x[1:4]?",a:["yth","yht","Pyt"],c:0},
  {q:"x='Python'; x[:2]?",a:["Py","yt","Pyt"],c:0},
  {q:"x='Python'; x[2:]?",a:["thon","th","ty"],c:0},
  {q:"x='Python'; x[-2:]?",a:["on","th","ho"],c:0},
  {q:"list(range(5,8))?",a:["[5,6,7]","[5,6,7,8]","[6,7,8]"],c:0},
  {q:"x=[1,2,3]; x*2?",a:["[1,2,3,1,2,3]","[2,4,6]","[1,2,3]"],c:0},
  {q:"x=[1,2]; y=[3,4]; x+y?",a:["[1,2,3,4]","[1,2]","[3,4]"],c:0},
  {q:"x=(1,2,3); x[1]?",a:["2","1","3"],c:0},
  {q:"x={1,2,3}; 2 in x?",a:["True","False","Error"],c:0},
  {q:"x={'a':1,'b':2}; x['a']?",a:["1","2","Error"],c:0},
  {q:"x={'a':1,'b':2}; 'b' in x?",a:["True","False","Error"],c:0},
  {q:"x={'a':1,'b':2}; 'c' in x?",a:["True","False","Error"],c:1},
  {q:"x=0; while x<3: x+=1; x?",a:["3","2","1"],c:0},
  {q:"x=0; while x<5: x+=2; x?",a:["6","5","4"],c:0},
  {q:"x=0; while x<4: x+=1; break; x?",a:["1","0","4"],c:0},
  {q:"for i in range(3): y=i; y?",a:["2","1","0"],c:0},
  {q:"for i in range(5): pass; i?",a:["4","5","0"],c:0},
  {q:"x=[1,2,3]; for i in x: pass; i?",a:["3","2","1"],c:0},
  {q:"x='abc'; for c in x: pass; c?",a:["c","a","b"],c:0},
  {q:"def f(x): return x+2; f(3)?",a:["5","6","4"],c:0},
  {q:"def f(x,y): return x*y; f(2,3)?",a:["6","5","4"],c:0},
  {q:"x=[1,2,3]; x.reverse(); x?",a:["[3,2,1]","[1,2,3]","[2,1,3]"],c:0},
  {q:"x=[1,2,3]; x.sort(reverse=True); x?",a:["[3,2,1]","[1,2,3]","[2,3,1]"],c:0},
  {q:"x='Hello'; x.replace('H','J')?",a:["Jello","Hello","JH"],c:0},
  {q:"x='Hello'; x.find('e')?",a:["1","0","2"],c:0},
  {q:"x='Hello'; x.count('l')?",a:["2","3","1"],c:1},
  {q:"x='abc'; x*3?",a:["'abcabcabc'","'aaabbbccc'","'abc'"],c:0},
  {q:"x=5; y=10; max(x,y)?",a:["10","5","0"],c:0},
  {q:"x=5; y=10; min(x,y)?",a:["5","10","0"],c:0},
  {q:"x=5; y=5; max(x,y)?",a:["5","0","10"],c:0},
  {q:"x=5; y=5; min(x,y)?",a:["5","0","10"],c:0},
  {q:"x=[1,2,3]; sum(x)?",a:["6","5","7"],c:0},
  {q:"x=[1,2,3]; min(x)?",a:["1","2","3"],c:0},
  {q:"x=[1,2,3]; max(x)?",a:["3","2","1"],c:0},
  {q:"x=10; abs(x)?",a:["10","-10","0"],c:0},
  {q:"x=-5; abs(x)?",a:["5","-5","0"],c:0},
  {q:"x='Python'; x.startswith('Py')?",a:["True","False","Error"],c:0},
  {q:"x='Python'; x.endswith('on')?",a:["True","False","Error"],c:0},
  {q:"x='Python'; x.isupper()?",a:["False","True","Error"],c:0},
  {q:"x='PYTHON'; x.isupper()?",a:["True","False","Error"],c:0}




  
];

// --- INIT ---
function startGame(){
  // Inputs entfernt, Standardwerte genutzt
  generateInitialClusters(0);
  setInterval(addRandomCluster,500);
  requestAnimationFrame(gameLoop);
}

// --- SPAWN ---
function generateInitialClusters(num){
  let attempts=0;
  while(aiClusters.length<num && attempts<1000){
    attempts++;
    let type=AI_TYPES[Math.floor(Math.random()*AI_TYPES.length)];
    let clusterSize=type.strength*3;
    let cx=(Math.random()-0.5)*2000;
    let cy=(Math.random()-0.5)*2000;
    if(checkCollision(cx,cy,80)) continue;
    let cluster={type:type,x:cx,y:cy,os:[]};
    for(let j=0;j<clusterSize;j++){
      let ox=cluster.x+Math.random()*40-20;
      let oy=cluster.y+Math.random()*40-20;
      cluster.os.push({x:ox,y:oy});
    }
    aiClusters.push(cluster);
  }
}

function addRandomCluster(){
  let type=AI_TYPES[Math.floor(Math.random()*AI_TYPES.length)];
  let clusterSize=type.strength*3;
  let cx=(Math.random()-0.5)*(cw*3)+mapOffset.x;
  let cy=(Math.random()-0.5)*(ch*3)+mapOffset.y;
  if(checkCollision(cx,cy,80)) return;
  let cluster={type:type,x:cx,y:cy,os:[]};
  for(let j=0;j<clusterSize;j++){
    let ox=cluster.x+Math.random()*40-20;
    let oy=cluster.y+Math.random()*40-20;
    cluster.os.push({x:ox,y:oy});
  }
  aiClusters.push(cluster);
}

function checkCollision(x,y,r){
  for(let c of aiClusters){
    if(Math.hypot(c.x-x,c.y-y)<r) return true;
  }
  return false;
}

// --- INPUT ---
window.addEventListener("keydown",e=>keys[e.key]=true);
window.addEventListener("keyup",e=>keys[e.key]=false);

// --- GAME LOOP ---
function gameLoop(){
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

function update(){
  let dx=0,dy=0;
  if(keys["ArrowUp"]||keys["w"]) dy=-speed;
  if(keys["ArrowDown"]||keys["s"]) dy=speed;
  if(keys["ArrowLeft"]||keys["a"]) dx=-speed;
  if(keys["ArrowRight"]||keys["d"]) dx=speed;
  mapOffset.x+=dx;
  mapOffset.y+=dy;

  player.trail.push({x:player.x,y:player.y});
  while(player.trail.length>player.length) player.trail.shift();

  if(!activeCluster){
    for(let cluster of aiClusters){
      for(let o of cluster.os){
        let px=cw/2;
        let py=ch/2;
        if(Math.hypot(px-(o.x-mapOffset.x),py-(o.y-mapOffset.y))<player.size){
          activeCluster=cluster;
          showTask(cluster);
          return;
        }
      }
    }
  }
}

function draw(){
  ctx.fillStyle="#222"; ctx.fillRect(0,0,cw,ch);

  aiClusters.forEach(cluster=>{
    cluster.os.forEach(o=>{
      ctx.fillStyle=cluster.type.color;
      ctx.fillRect(o.x-mapOffset.x-15,o.y-mapOffset.y-15,30,30);
    });
  });

  for(let i=0;i<player.trail.length;i++){
    let p=player.trail[i];
    ctx.fillStyle="yellow";
    ctx.fillRect(cw/2-15+(i-player.trail.length/2),ch/2-15+(i-player.trail.length/2),30,30);
  }

  player.segments.forEach(seg=>{
    ctx.fillStyle=seg.color;
    ctx.fillRect(cw/2-15+seg.offsetX,ch/2-15+seg.offsetY,30,30);
  });

  ctx.fillStyle="orange";
  ctx.fillRect(cw/2-15,ch/2-15,30,30);

  scoreboard.innerHTML="Score: "+score;
}

function showTask(cluster){
  overlay.innerHTML="";
  overlay.style.display="block";
  let task=tasks[Math.floor(Math.random()*tasks.length)];
  overlay.innerHTML="<div style='font-size:28px;margin-bottom:15px;'>"+task.q+"</div>";
  task.a.forEach((ans,i)=>{
    let btn=document.createElement("button");
    btn.innerText=ans;
    btn.onclick=()=>{
      if(i===task.c){
        cluster.os.forEach(o=>{
          player.segments.push({offsetX:o.x-cluster.x, offsetY:o.y-cluster.y, color:cluster.type.color});
        });
        score+=cluster.type.strength;
      }
      overlay.style.display="none";
      let index=aiClusters.indexOf(cluster);
      if(index>-1) aiClusters.splice(index,1);
      activeCluster=null;
    };
    overlay.appendChild(btn);
  });
}

// --- SCORE IMPORT / EXPORT ---
function saveScore(){
  let data=JSON.stringify({score,playerLength:player.length,segments:player.segments.length});
  let blob=new Blob([data],{type:"application/json"});
  let a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="score.json";
  a.click();
}
function loadScore(){
  let input=document.createElement("input");
  input.type="file";
  input.accept=".json";
  input.onchange=e=>{
    let file=input.files[0];
    let reader=new FileReader();
    reader.onload=function(ev){
      let obj=JSON.parse(ev.target.result);
      score=obj.score||0;
      player.length=obj.playerLength||5;
    };
    reader.readAsText(file);
  };
  input.click();
}

// --- START ---
startGame();
</script>
</body>
</html>

