<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vokabeltrainer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #1e3c72, #2a5298);
      color: white;
      text-align: center;
      padding: 20px;
    }
    .card {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      margin: 20px auto;
      border-radius: 10px;
      width: 90%;
      max-width: 600px;
    }
    .question {
      font-size: 24px;
      margin-bottom: 20px;
    }
    .answers button {
      background: #ffffff20;
      border: none;
      color: white;
      font-size: 18px;
      padding: 10px 20px;
      margin: 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    .answers button:hover {
      background: #ffffff40;
    }
    #menu button {
      margin: 5px;
    }
    .vocab-list {
      margin-top: 20px;
      text-align: left;
    }
    .vocab-item {
      margin: 5px 0;
    }
    .vocab-item button {
      margin-left: 10px;
      background: #e74c3c;
    }
  </style>
</head>
<body>
  <h1>                   </h1>

  <div id="menu" class="card">
    <button onclick="startQuiz()">Vokabel-Quiz starten</button>
    <button onclick="addWordPrompt()">Neue Vokabel hinzufügen</button>
    <button onclick="resetVocab()">Alle Vokabeln löschen</button>
    <button onclick="showVocabList()">Vokabeln anzeigen & löschen</button>
    <button onclick="exportVocab()">Vokabeln exportieren</button>
    <button onclick="importVocab()">Vokabeln importieren</button>
  </div>

  <div id="quiz" class="card" style="display: none">
    <div class="question" id="questionText"></div>
    <div class="answers" id="answers"></div>
  </div>

  <div id="vocabList" class="card" style="display: none"></div>

  <input type="file" id="importFile" style="display:none" />

  <script>
    let defaultVocab = [];
    let vocab = JSON.parse(localStorage.getItem("vocab")) || defaultVocab;

    function saveVocab() {
      localStorage.setItem("vocab", JSON.stringify(vocab));
    }

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function startQuiz() {
      if (vocab.length < 1) {
        customMessage("Bitte zuerst Vokabeln hinzufügen!", true);
        return;
      }
      document.getElementById("menu").style.display = "none";
      document.getElementById("quiz").style.display = "block";
      document.getElementById("vocabList").style.display = "none";
      askQuestion();
    }

    function askQuestion() {
      let questionIndex = Math.floor(Math.random() * vocab.length);
      let correct = vocab[questionIndex];
      let options = shuffle([correct, ...shuffle(vocab).filter(v => v !== correct)].slice(0, 3));

      document.getElementById("questionText").innerText = `Was heißt "${correct.de}" ?`;
      let answersDiv = document.getElementById("answers");
      answersDiv.innerHTML = "";

      options.forEach(option => {
        let btn = document.createElement("button");
        btn.innerText = option.la;
        btn.onclick = () => {
          if (option.la === correct.la) {
            customMessage("✅ Richtig!");
          } else {
            customMessage(`❌ Falsch du dummi. Richtig wäre ${correct.la}`);
          }
          setTimeout(askQuestion, 1000);
        };
        answersDiv.appendChild(btn);
      });
    }

    function addWordPrompt() {
      let de = prompt("Vorgegebenes Wort:");
      let la = prompt("Vorgeschlagenes Wort:");
      if (de && la) {
        vocab.push({ de, la });
        saveVocab();
        customMessage("Vokabel hinzugefügt!");
      }
    }

    function resetVocab() {
      if (confirm("Bist du sicher, dass du ALLE Vokabeln löschen willst?")) {
        vocab = [];
        saveVocab();
        customMessage("Vokabeln wurden loider gelöscht.");
      }
    }

    function showVocabList() {
      const listDiv = document.getElementById("vocabList");
      listDiv.innerHTML = "<h3>leer, mach mal mehr xd</h3>";
      vocab.forEach((v, index) => {
        const entry = document.createElement("div");
        entry.className = "vocab-item";
        entry.innerHTML = `${v.de} – ${v.la} <button onclick="deleteWord(${index})">❌</button>`;
        listDiv.appendChild(entry);
      });
      listDiv.style.display = "block";
      document.getElementById("quiz").style.display = "none";
    }

    function deleteWord(index) {
      vocab.splice(index, 1);
      saveVocab();
      showVocabList();
    }

    function exportVocab() {
      const blob = new Blob([JSON.stringify(vocab)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "vokabeln.json";
      a.click();
      URL.revokeObjectURL(url);
    }

    function importVocab() {
      const fileInput = document.getElementById("importFile");
      fileInput.click();
      fileInput.onchange = () => {
        const file = fileInput.files[0];
        const reader = new FileReader();
        reader.onload = () => {
          try {
            const data = JSON.parse(reader.result);
            if (Array.isArray(data)) {
              vocab = data;
              saveVocab();
              customMessage("Vokabeln importiert!");
            } else {
              customMessage("Ungültiges Format", true);
            }
          } catch {
            customMessage("Fehler beim Einlesen der Datei", true);
          }
        };
        reader.readAsText(file);
      };
    }

    function customMessage(text, isError = false) {
      const msg = document.createElement("div");
      msg.innerText = text;
      msg.style.position = "fixed";
      msg.style.top = "20px";
      msg.style.left = "50%";
      msg.style.transform = "translateX(-50%)";
      msg.style.background = isError ? "#e74c3c" : "#2ecc71";
      msg.style.padding = "10px 20px";
      msg.style.borderRadius = "10px";
      msg.style.color = "white";
      msg.style.fontSize = "18px";
      msg.style.zIndex = 9999;
      document.body.appendChild(msg);
      setTimeout(() => msg.remove(), 1500);
    }
  </script>
</body>
</html>
